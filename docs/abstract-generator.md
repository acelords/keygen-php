# AbstractGenerator Class

- [Overview](#1)
- [Properties](#2)
- [Methods](#11)

## Overview
The `AbstractGenerator` class is the base generator class implemented by all generator classes of the Keygen package, including the `Keygen` class. It implements the `GeneratorInterface` interface which requires that a `generate()` method must be implemented by all abstract generators. The `AbstractGenerator` class provides the basic functionalities for all key generators.

> **`abstract` Class**  

> The `AbstractGenerator` class is declared as an abstract class by the `abstract` keyword. Hence, its constructor cannot be called with the `new` keyword. It is meant to be extended by specialised sub-classes.

The `AbstractGenerator` class has two direct sub-classes namely:

- `Generator` **class**  

    This is the parent class of all the built-in generators. It provides specialised functionality for _[key exclusions]_ and handling the key generation logic, which includes: applying key transformations and adding affixes to generated keys. See [Generator Class] for more details about the `Generator` class.   


- `Keygen` **class**   

    The `Keygen` class acts as a [facade] to provide access to all the functionalities of the built-in key generators via lots of convenience methods. It is overloaded to provide dynamic methods for creating instances of specialized generators. See [Keygen Class] for more details about the `Keygen` class.

## Properties

#### `length`
This is an `integer` that specifies the length of keys to be generated by the generator. It defaults to `16` if no length has been specified.

#### `prefix`
This is the `string` that will be prepended to keys generated by the generator (_affixed to the beginning of generated keys_). It returns `null` if no prefix has been specified.

#### `suffix`
This is the `string` that will be appended to keys generated by the generator (_affixed to the ending of generated keys_). It returns `null` if no suffix has been specified.

#### `inclusiveAffix`
This is a `boolean` flag that determines whether the key length should include the length of the affixes (prefix and suffix) - this is known as _affix inclusion_. `true` indicates that the key length should include the affix length. The default value is `true`.

#### `randomLength`
This is a `boolean` flag that indicates whether the generator should generate keys of random length. If this flag is `true`, the `length` property of the generator is ignored and keys of random length are generated. The default value is `false`.

#### `transformations`
This is an `array` that contains a queue of key transformations that have been registered on the generator. See [Key Transformations] for more details on applying key transformations.

#### `mutables`
This is an `array` that contains a collection of mutable generator properties that have been specified for the generator. See [Key Mutations] for more details on mutable generator properties.

#### `immutables`
This is an `array` that contains a collection of immutable generator properties that have been specified for the generator. See [Key Mutations] for more details on mutable generator properties.

## Methods

> **Return Values**   

> All methods of the `AbstractGenerator` class, except the `generate()` method, return the generator instance on which they are called. This allows for the flexibility of using [method chaining] to execute methods on the generator.

#### `length(int|bool $length [, bool $propagateMutation = true])`
The `length()` method defines the key length of the generator. If the `$length` argument is `false`, then the `randomLength` property is set to `true` - and keys of random length will be generated. Otherwise, if it is not a valid numeric length value, an `InvalidLengthKeygenException` is thrown.

> **`$propagateMutation`**  

> The `$propagateMutation` argument is a boolean that indicates if the change in the length property should be adopted by linked generators in the mutates collection of the generator. It is set `true` except otherwise stated. This argument has the same meaning for the `length()`, `prefix()` and `suffix()` methods.

#### `prefix(string|bool $prefix [, bool $propagateMutation = true])`
The `prefix()` method sets the prefix string of the generator. If the `$prefix` argument is `false`, it clears any existing prefix on the generator. Otherwise, if it is not a valid affix value, an `InvalidAffixKeygenException` is thrown.

#### `suffix(string|bool $suffix [, bool $propagateMutation = true])`
The `suffix()` method sets the suffix string of the generator. If the `$suffix` argument is `false`, it clears any existing suffix on the generator. Otherwise, if it is not a valid affix value, an `InvalidAffixKeygenException` is thrown.

#### `affix(string|bool $prefix = null [, string|bool $suffix = null])`
The `affix()` method is a convenience method that sets the prefix and suffix strings of the generator with a single call. The `$prefix` argument is sets the prefix string of the generator, while the `$suffix` argument sets the suffix string. If any of the values is not a valid affix value, an `InvalidAffixKeygenException` is thrown.

#### `inclusiveAffix(bool $flag)`
The `inclusiveAffix()` method enables or disables _affix inclusion_ on the generator. If the `$flag` argument is set to `true`, affix inclusion is enabled; otherwise, it is disabled.

#### `transformation(array|callable $transformation [...])`
The `transformation()` method appends the specified transformation or collection of transformations to the transformations queue. The `$transformation` argument must be a `callable` or an `array` that contains only callables, otherwise an `InvalidTransformationKeygenException` is thrown.

#### `transformations(array|callable $transformation [...])`
The `transformations()` method resets the transformations queue and starts a new queue with the specified transformation or collection of transformations. The `$transformation` argument must be a `callable` or an `array` that contains only callables, otherwise an `InvalidTransformationKeygenException` is thrown. If `$transformation` is set to an empty array (`[]`), the transformations queue is emptied.


[facade]: <https://en.wikipedia.org/wiki/Facade_pattern>
[Generator Class]: <./generator.md>
[key exclusions]: <./key-exclusion.md>
[Keygen Class]: <./keygen.md>
[Key Mutations]: <./key-mutation.md>
[Key Transformations]: <./key-transformation.md>
[method chaining]: <https://en.wikipedia.org/wiki/Method_chaining>
